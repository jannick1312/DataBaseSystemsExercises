%% ================================================================
%% # DBIS Databases Hand-in Template
%% 
%% Template for students to hand-in their databases exercise solutions.
%% 
%% [Databases and Information Systems Group](https://dbis.dmi.unibas.ch/)
%%
%% ## Usage
%% 
%% Fill in the required fields and write your submission
%%
%% ## Issues
%%
%% See dbisdbhandin.sty for further information.
%% ================================================================
\documentclass{article}
\usepackage{dbisdbhandin}
\usepackage[english]{babel}
%% ================================================================
%%
%% General Information
%%
%% ================================================================
%%
%% Add your information here
\course       {Databases}
\semester     {Autumn 2025}
\exerciseno   {1}
\studenta     {Aiysha Frutiger}
\studentb     {Jannick Seper}
\studentc     {Luis Tritschler}
%% Comment if you do the exercises alone


%% ================================================================
%%
%% Common Packages
%%
%% ================================================================
%%
%% Useful common packages for this course

%% Include pdfs into latex
\usepackage{pdfpages}
%% \includepdf[pages=1,pagecommand={\pagestyle{fancy}}]{filename}

%% Drawing everything, with lots of libraries
\usepackage{tikz}
%% A library providing ER prefabs
\usetikzlibrary{er}
\usetikzlibrary{positioning,arrows.meta}
%% ================================================================
%%
%% Custom Packages
%%
%% ================================================================
%%
%% Add custom packages below:
%%

% \usepackage{mypackage}

%% ================================================================
%%
%% Custom Commands
%%
%% ================================================================
%%
%% DRY: Use commands when you use something often or you'd like
%% to define it only once
%%

\newcommand*{\TikZ}{Ti\textit{k}Z}


\begin{document}

\printfront

\task{}
\begin{enumerate}[a)]
    \item \texttt{AHV $\rightarrow$ (FullName, Birthday, Zip, country)} \newline
        \texttt{FullName $\rightarrow$ (FirstName, LastName)} \newline
        \texttt{Birthday $\rightarrow$ YearOfBirth} \newline
        \texttt{(County, Zip) $\rightarrow$ City}

    The \texttt{AHV} uniquely identifies each resident. From these attributes, all others can be derived transitively:
    \texttt{FullName} determines \texttt{(FirstName, LastName)}, \texttt{Birthday} determines \texttt{YearOfBirth}, and \texttt{(Country, Zip)} determines \texttt{City}.
    We thought about including \texttt{(Country, City) $\rightarrow$ Zip} but there are cities with multiple zips (ZÃ¼rich for example) and that's why we did not include this dependency.


    \item With this functional dependencies we compute the attribute closure for \texttt{AHV}. \texttt{F$^+$} is \texttt{(AHV, FullName, Birthday, Zip, Country, FirstName, LastName, YearOfBirth, City) \newline = sch(Resident)}. Since no subset of \texttt{AHV} determines all attributes, \texttt{AHV} is minimal and therefore the only candidate key.
    

    \item The relation Resident is in 2NF, since the only candidate key is AHV and therefore no partial dependencies on a subset of a composite key can exist. It is not in Third Normal Form, because there are several transitive dependencies. For example: \texttt{AHV $\rightarrow$ (Zip, country)} and \texttt{(County, Zip) $\rightarrow$ City}, hence City is transitively dependent on AHV.
    Version in 3NF: \newline
    \texttt{Resident(\uline{AHV}, \uwave{FullName}, \uwave{Birthday}, \uwave{Zip, Country})} \newline
    \texttt{Name(\uline{FullName}, FirstName, LastName)} \newline
    \texttt{Birthday(\uline{Birthday}, YearOfBirth)} \newline
    \texttt{Location(\uline{Zip, Country}, City)} 
\end{enumerate}

\task{}
\begin{enumerate}[a)]
    \item \texttt{\{\{A, B, C\}, \{A, C, D\}\}}
    \item 
    \begin{enumerate}[i]
        \item Because for FD2 \texttt{B} on the left is not a superkey, R is not in BCNF.
        \item Because for FD3 \texttt{E} on the right which is not part of a primary key, R is not in 3NF.
        \item Because in FD3, \texttt{E} (non-prime attribute) is dependent on \texttt{C,D} which is a subset of a candidate key, R is not in 2NF \newline
        
        R is only in 1NF.
    \end{enumerate}
\end{enumerate}

\task{}
\begin{enumerate}[a)]
    \item \texttt{\{\{A, C\}, \{A, B\}\}}
    \item 
    \begin{enumerate}[i]
        \item S is in 2NF because in FD1, neither \texttt{A} nor \texttt{B} alone determine \texttt{D} and \texttt{C} is in the candidate keys. Also in FD2, although \texttt{C} is a proper subset of a candidate key, B is a primary key and therefore all rules for 2NF hold true.
        \item S is also in 2NF because in FD1, \texttt{{A,B}} is a candidate key and therefore a superkey and therefore 2NF is satisfied. Because \texttt{C} alone is not a superkey, but \texttt{B} is a prime key, this FD also satisfies 3NF.
        \item However, because \texttt{C} alone is not a superkey, it does not satisfie FD2 and therefore is not a BCNF.
    \end{enumerate}
\end{enumerate}

\task{}

\task{}

\end{document}
